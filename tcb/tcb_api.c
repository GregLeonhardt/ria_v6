/*******************************  COPYRIGHT  ********************************/
/**
 *  Author? "Gregory N. Leonhardt"
 *  License? "CC BY-NC 2.0"
 *           "https://creativecommons.org/licenses/by-nc/2.0/"
 *
 ****************************************************************************/

/******************************** JAVADOC ***********************************/
/**
 *  This file contains public function that makeup the external
 *  library components of the 'tcb' library.
 *
 *  @note
 *
 ****************************************************************************/

/****************************************************************************
 *  Compiler directives
 ****************************************************************************/

#define ALLOC_TCB          ( "ALLOCATE STORAGE FOR TCB" )

/****************************************************************************
 * System Function API
 ****************************************************************************/

                                //*******************************************
#include <stdint.h>             //  Alternative storage types
#include <stdbool.h>            //  TRUE, FALSE, etc.
#include <stdio.h>              //  Standard I/O definitions
                                //*******************************************
                                //*******************************************

/****************************************************************************
 * Application APIs
 ****************************************************************************/

                                //*******************************************
#include "global.h"             //  Global stuff for this application
#include "libtools_api.h"       //  My Tools Library
                                //*******************************************
#include "tcb_api.h"            //  API for all tcb_*               PUBLIC
#include "tcb_lib.h"            //  API for all TCB__*              PRIVATE
                                //*******************************************

/****************************************************************************
 * Private API Enumerations
 ****************************************************************************/

//----------------------------------------------------------------------------
//----------------------------------------------------------------------------

/****************************************************************************
 * Private API Definitions
 ****************************************************************************/

//----------------------------------------------------------------------------
//----------------------------------------------------------------------------

/****************************************************************************
 * Private API Structures
 ****************************************************************************/

//----------------------------------------------------------------------------
//----------------------------------------------------------------------------

/****************************************************************************
 * Private API Storage Allocation
 ****************************************************************************/

//----------------------------------------------------------------------------
//----------------------------------------------------------------------------

/****************************************************************************
 * Public API Functions
 ****************************************************************************/

/****************************************************************************/
/**
 *  Initialize the Translations tables.
 *
 *  @param  tcb_p               Pointer to a Thread Control Block
 *
 *  @return void                No information is returned
 *
 *  @note
 *
 ****************************************************************************/

void
tcb_free(
    struct  tcb_t           *   tcb_p
    )
{

    /************************************************************************
     *  Function Initialization
     ************************************************************************/


    /************************************************************************
     *  Function Body
     ************************************************************************/


    /************************************************************************
     *  Function Exit
     ************************************************************************/

    //  DONE!
}

/****************************************************************************/
/**
 *  Initialize the Translations tables.
 *
 *  @param  group_name          Group thread name
 *  @param  group_thread_num    Group Thread Number
 *  @param  max_depth           MAXIMUM queue depth before blocking.
 *
 *  @return tcb_p               Pointer to a Thread Control Block
 *
 *  @note
 *
 ****************************************************************************/

struct  tcb_t   *
tcb_new(
    char                    *   group_name,
    int                         group_thread_num,
    int                         max_depth
    )
{
    /**
     *  @param  tcb_p           Pointer to a Thread Control Block           */
    struct  tcb_t           *   tcb_p;

    /************************************************************************
     *  Function Initialization
     ************************************************************************/

    //  Just in case everything goes south.
    tcb_p = NULL;

    /************************************************************************
     *  Function Body
     ************************************************************************/

    //  Allocate storage for a new Thread Control Block
    tcb_p = mem_malloc( sizeof( struct tcb_t ) );

    //  Build the queue name
    snprintf( tcb_p->thread_name,
              sizeof( import_tcb->thread_name ),
              "%s%02d", group_name, group_thread_num );

    //  Create the queue
    tcb_p->queue_id = queue_new( tcb_p->thread_name, max_depth );

    /************************************************************************
     *  Function Exit
     ************************************************************************/

    //  DONE!
    return( tcb_p );
}
/****************************************************************************/